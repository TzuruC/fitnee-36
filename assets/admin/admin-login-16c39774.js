import{a as n}from"../auth-99677de4.js";import{a as c}from"../config-afd6d7d3.js";const u=document.querySelector(".loginBtn"),a=document.querySelector(".loginPsw"),m=document.querySelector(".loginMail");function f(){a.value=""}f();let i={};u.addEventListener("click",function(r){r.preventDefault();let e="",s="",o="",l="";i={email:m.value,password:a.value,role:"admin"},axios.post(`${c}/login`,i).then(function(t){e=t.data.accessToken,s=t.data.user.id,o=t.data.user.role,l=t.data.user.name,console.log(t),e&&o==="admin"?(localStorage.setItem("userLoginToken",e),localStorage.setItem("userRole",o),localStorage.setItem("userName",l),localStorage.setItem("userId",s),n.fire({title:"登入成功！",icon:"success",text:`歡迎回來，管理員${l}`,showConfirmButton:!1,timer:2e3,timerProgressBar:!0}),setTimeout(()=>{window.location.href="admin-article-list.html"},2e3)):e&&o!=="admin"?n.fire({title:"您沒有權限進入",icon:"warning",confirmButtonText:"確認",buttonsStyling:!1,customClass:{confirmButton:"btn btn-success py-3 px-10"}}):(n.fire({title:"帳號或密碼錯誤",icon:"warning",confirmButtonText:"確認",buttonsStyling:!1,customClass:{confirmButton:"btn btn-success py-3 px-10"}}),console.log("帳號或密碼錯誤"))}).catch(function(t){n.fire({title:"帳號或密碼錯誤",icon:"error",confirmButtonText:"確認",buttonsStyling:!1,customClass:{confirmButton:"btn btn-success py-3 px-10"}}),console.log(t)})});
